import{r as o,j as s}from"./index-DRzjDA2I.js";const N=({name:a,onCodeChange:l})=>{const[r,i]=o.useState(""),[p,c]=o.useState(""),[m,u]=o.useState("");o.useEffect(()=>{r!==""&&fetch("/api/validate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:r,lang:m})}).then(e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.json()}).then(e=>{if(e.status==="ok"){c(""),l&&l(r);return}const t=e.message;if(typeof t=="string"){c(t);return}else c(`Error at line ${t.line}:${t.column} - ${t.msg}`)})},[r,l,m]);const h=e=>{const n=e.target.innerText;i(n)},x=e=>{var n;const t=(n=e.target.files)==null?void 0:n[0];if(t){const g=t.name.split(".").pop()||"";u(g);const d=new FileReader;d.onload=y=>{var f;const b=(f=y.target)==null?void 0:f.result;i(b)},d.onerror=()=>{alert("Failed to read the file. Please try again.")},d.readAsText(t)}},j=!r;return s.jsxs("div",{className:"form-floating",children:[s.jsx("form",{className:"row mb-3",children:s.jsx("div",{className:"col-auto",children:s.jsx("input",{type:"file",className:"form-control",accept:".py,.pyt,.pyh,.java,.jat",name:"file",id:"file",onChange:x,required:!0})})}),s.jsxs("div",{className:"row m-1",children:[s.jsx("p",{style:{color:"red"},children:p}),s.jsx("label",{htmlFor:a,style:{height:"fit-content"},children:a}),s.jsx("p",{style:{resize:"none",whiteSpace:"pre-wrap"},className:"form-control h-100",id:a,contentEditable:!0,onBlur:h,children:r})]}),s.jsx("form",{className:"row p-4 mw-25",onSubmit:()=>i(""),children:s.jsx("input",{type:"submit",value:"Clear",className:"btn btn-danger",disabled:j})})]})};export{N as default};
